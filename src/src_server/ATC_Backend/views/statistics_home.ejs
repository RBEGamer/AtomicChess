<html lang="en">

<head>

  <link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet">



  <link href="/css/landing-page.css" rel="stylesheet">
  <link href="/css/main.css" rel="stylesheet">
  <link href="/css/dashboard_main.css" rel="stylesheet">
  <link href="/css/dashboard_cards.css" rel="stylesheet">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="AtomicChess">
  <meta name="author" content="Marcel Ochsendorf">
  <meta http-equiv="cache-control" content="max-age=0" />
  <meta http-equiv="cache-control" content="no-cache" />
  <meta http-equiv="expires" content="0" />
  <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
  <meta http-equiv="pragma" content="no-cache" />
  <title>ATC BACKEND</title>
</head>

<body class="container">

<nav class="navbar navbar-light bg-light static-top">
  <div class="container">
    <a class="navbar-brand" href="/"><img width="64px"  src="/img/icons/chess_icon.png"><b>AtomicChess</b></a>
  </div>
</nav>


<!-- Masthead -->




<div class="row justify-content-center">
<div class="col-md-12">
  <div class="card">
    <div class="card-header">
      <h4 class="card-title text-justify">GAME HISTORY</h4>

    </div>
    <div class="card-body">

      <div class="text-center">
        <p class="card-content">PLEASE SELECT A GAME BELOW TO GET MORE INFORMATION ABOUT IT</p>



        <p class="card-content" id="mtl_field"></p>
      </div>




    </div>
  </div>
</div>

</div>







<!-- Footer -->
<footer class="footer bg-light">
  <div class="container text-center">

    <div class="row top-buffer"><div class="col-md-12"><h4 class="card-title">SERVICE AVAILABILITY</h4></div></div>
    <div class="row justify-content-center">
      <div class="col-auto">

        <table class="table table-responsive">
          <tbody>
          <tr>
            <th>BACKEND</th>
            <td><img id="sa_backend" width="64px" src="/img/icons/alert_off.png" /></td>
          </tr>
          <tr>
            <th>CHESS LOGIC VALIDATOR</th>
            <td><img id="sa_mv_validator" width="64px" src="/img/icons/alert_off.png" /></td>
          </tr>

          <tr>
            <th>AVAILABLE PLAYER AI INSTANCES</th>
            <td><span id="sa_aaipc"></span></td>
          </tr>
          </tbody>
        </table>

      </div>
      </div>



</footer>






<script src="/js/jquery/jquery.min.js"></script>
<script src="/bootstrap/js/bootstrap.min.js"></script>

<script>

  function check_service_state(){
    $.getJSON('/rest/service_state',function (data) {
      //GET MOVEMENT VALIDATOR MICROSERVICE STATE
      if(data && data.move_validator_state){
        $("#sa_mv_validator").attr("src", "/img/icons/cloud_offline.png");
      }else{
        $("#sa_mv_validator").attr("src", "/img/icons/cloud_online.png");
      }

    });
    //CHECK STATUS OF THE TABLE COMMUNICATION BACKEND
    $.getJSON('/rest/client_status',function (data) {
      if(data && data.status && !data.err){
        $("#sa_backend").attr("src", "/img/icons/cloud_online.png");
      }else{
        $("#sa_backend").attr("src", "/img/icons/cloud_online.png");
      }
    });

    //GET AVARIABLE AI PLAYER COUNT
    $.getJSON('/rest/get_avariable_ai_players',function (data) {

      if(data && data.count !== undefined&&data.count != null && data.count >=0) {
        $("#sa_aaipc").html("<b>"+String(data.count)+"</b>");
      }else{
        $("#sa_aaipc").html("---");
      }
    });

  }

  $(document).ready(function () {


    console.log("ready!");

    check_service_state();

  });
</script>

</body>

</html>